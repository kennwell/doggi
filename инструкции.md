

### Инструкции по установке и запуску

1. **Создайте виртуальное окружение**:
   ```
   python3 -m venv doggi-env
   source doggi-env/bin/activate  # На Mac
   ```

2. **Установите зависимости** (создайте файл `requirements.txt` с содержимым ниже и выполните `pip install -r requirements.txt`):
   ```
   dnspython>=2.4.0
   requests>=2.31.0
   tabulate>=0.9.0
   ```

3. **Установите API-ключ** (обязательно для IPGeolocation.io, зарегистрируйтесь бесплатно на https://ipgeolocation.io для free tier):
   ```
   export IPGEO_API_KEY=your_api_key_here
   ```

4. **Сохраните код** в файл `doggi.py` и сделайте исполняемым:
   ```
   chmod +x doggi.py
   ```

5. **Запуск** (на Mac M3 терминале):
   - По умолчанию: `./doggi.py ya.ru`
   - С сервером: `./doggi.py @8.8.8.8 ya.ru` (UDP to 8.8.8.8:53)
   - DoT: `./doggi.py tls://1.1.1.1:853 google.com`
   - DoH: `./doggi.py https://dns.google/dns-query google.com` (добавьте /dns-query если нужно)

### Примечания
- **DoH/DoT поддержка**: Использует `DoHResolver` и `DoTResolver` из dnspython (требует dnspython >=2.3). Для DoH предполагает URL заканчивается на /dns-query (Cloudflare/Google стандарт).
- **Порт в выводе**: Для UDP и дефолта — :53; для DoT — :853; DoH — :443 (как в примерах).
- **Обработка ошибок**: IP всегда показывается; "N/A" для отсутствующих geo-данных. Таймауты 10 сек.
- **Тестирование**: На Mac M3 протестируйте с `ya.ru` (Yandex IPs). Для IPv6 — `ipv6.google.com`. Если API лимит — зарегистрируйтесь для ключа.
- **Ограничения**: Только один сервер, A/AAAA. Для production добавьте retry в geo (опционально).

Если ошибки или доработки (например, цветной вывод), дайте знать — обновлю код.

Sources
