

### Инструкции по установке и запуску

0. **Свежий Python (рекомендовано 3.12+)**:
   ```
   brew install python@3.12
   eval "$(/opt/homebrew/bin/brew shellenv)"  # если brew только что поставили/обновили
   ```

1. **Создайте виртуальное окружение** (на базе 3.12):
   ```
   python3.12 -m venv doggi-env
   source doggi-env/bin/activate
   ```

2. **Установите зависимости** (создайте файл `requirements.txt` с содержимым ниже и выполните `pip install -r requirements.txt`):
   ```
   dnspython>=2.4.0
   requests>=2.31.0
   tabulate>=0.9.0
   ```

3. IPinfo CLI :
   ```
   brew install ipinfo-cli   # https://github.com/ipinfo/cli
   ipinfo login              # вставьте токен из https://ipinfo.io
   ```

4. **Сохраните код** в файл `doggi.py` и сделайте исполняемым:
   ```
   chmod +x doggi.py
   ```

5. **(Опционально) Глобальный запуск `doggi ...`**:
   ```
   mkdir -p ~/bin
   cat <<'EOF' > ~/bin/doggi
   #!/bin/bash
   exec /Users/michael7/github/doggi/doggi-env/bin/python /Users/michael7/github/doggi/doggi.py "$@"
   EOF
   chmod +x ~/bin/doggi
   echo 'export PATH="$HOME/bin:$PATH"' >> ~/.zshrc
   source ~/.zshrc
   ```

6. **Запуск** (на Mac M3 терминале):
   - По умолчанию: `./doggi.py ya.ru`
   - С сервером: `./doggi.py @8.8.8.8 ya.ru` (UDP to 8.8.8.8:53)
   - DoT: `./doggi.py @tls://1.1.1.1:853 google.com`
   - DoH: `./doggi.py @https://dns.google/dns-query google.com` (добавьте /dns-query если нужно)

### Примечания
- **DoH/DoT поддержка**: Использует `DoHResolver` и `DoTResolver` из dnspython (требует dnspython >=2.3). Для DoH предполагает URL заканчивается на /dns-query (Cloudflare/Google стандарт).
- **Порт в выводе**: Для UDP и дефолта — :53; для DoT — :853; DoH — :443 (как в примерах).
- **Обработка ошибок**: IP всегда показывается; "N/A" для отсутствующих geo-данных. Таймауты 10 сек.
- **Тестирование**: Протестируйте с `ya.ru` (Yandex IPs). Для IPv6 — `ipv6.google.com`. Если API лимит — зарегистрируйтесь для ключа.
- **Ограничения**: Только один сервер, A/AAAA. Для production добавьте retry в geo (опционально).

Если ошибки или доработки (например, цветной вывод), дайте знать — обновлю код.

Sources
